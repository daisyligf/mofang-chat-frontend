2014-09-23 18:33:52 | frontend.error | ERROR |at MessageLogicImpl.getPrivateMessageList throw an error. parameter:fromUserId:20674522, toUserId:608598,minMessageId:13, maxMessageId:9223372036854775807,pageSize:50
com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

Last packet sent to the server was 17 ms ago.
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:406)
	at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1074)
	at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2985)
	at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2871)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3414)
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1936)
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2060)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2542)
	at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1734)
	at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1885)
	at com.jolbox.bonecp.PreparedStatementHandle.executeQuery(PreparedStatementHandle.java:172)
	at com.mofang.framework.data.mysql.MysqlHelper.query(MysqlHelper.java:84)
	at com.mofang.framework.data.mysql.AbstractMysqlSupport.getList(AbstractMysqlSupport.java:564)
	at com.mofang.chat.business.mysql.impl.ChatPrivateMessageDaoImpl.getMessages(ChatPrivateMessageDaoImpl.java:100)
	at com.mofang.chat.business.service.impl.PrivateMessageServiceImpl.getPullMessages(PrivateMessageServiceImpl.java:147)
	at com.mofang.chat.frontend.logic.impl.MessageLogicImpl.getPrivateMessageList(MessageLogicImpl.java:917)
	at com.mofang.chat.frontend.logic.impl.MessageLogicImpl.pullMessage(MessageLogicImpl.java:817)
	at com.mofang.chat.frontend.controller.websocket.PullMessageAction.exec(PullMessageAction.java:25)
	at com.mofang.chat.frontend.controller.AbstractActionExecutor.execute(AbstractActionExecutor.java:24)
	at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at com.mofang.framework.web.server.reactor.proxy.ActionInvocationHandler.invoke(ActionInvocationHandler.java:23)
	at com.sun.proxy.$Proxy5.execute(Unknown Source)
	at com.mofang.framework.web.server.reactor.ActionDispatcher.execute(ActionDispatcher.java:62)
	at com.mofang.framework.web.server.handler.WebServerHandler.handleWebSocketFrame(WebServerHandler.java:175)
	at com.mofang.framework.web.server.handler.WebServerHandler.channelRead(WebServerHandler.java:86)
	at io.netty.channel.DefaultChannelHandlerContext.invokeChannelRead(DefaultChannelHandlerContext.java:341)
	at io.netty.channel.DefaultChannelHandlerContext.fireChannelRead(DefaultChannelHandlerContext.java:327)
	at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:254)
	at io.netty.channel.DefaultChannelHandlerContext.invokeChannelRead(DefaultChannelHandlerContext.java:341)
	at io.netty.channel.DefaultChannelHandlerContext.fireChannelRead(DefaultChannelHandlerContext.java:327)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:155)
	at io.netty.channel.DefaultChannelHandlerContext.invokeChannelRead(DefaultChannelHandlerContext.java:341)
	at io.netty.channel.DefaultChannelHandlerContext.fireChannelRead(DefaultChannelHandlerContext.java:327)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:785)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:116)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:494)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:461)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:378)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:350)
	at io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:116)
	at java.lang.Thread.run(Thread.java:695)
Caused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.
	at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:2431)
	at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2882)
	... 40 more
